name: ci

on:
  push:
    branches:
      - "main"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: "3.13.4"
          channel: "stable"
      - run: flutter build web
      - name: Copy single file to remote
        uses: garygrossgarten/github-action-scp@release
        with:
          local: build/web/*
          remote: /var/www/admin-uat.sum-foods.com/
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USERNAME }}
          password: ${{ secrets.PASSWORD }}
      # - name: copy file via ssh password
      #   uses: appleboy/scp-action@v0.1.4
      #   with:
      #     host: ${{ secrets.HOST }}
      #     username: ${{ secrets.USERNAME }}
      #     password: ${{ secrets.PASSWORD }}
      #     source: "build/web/*"
      #     target: /var/www/admin-uat.sum-foods.com/
